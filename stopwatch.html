<!DOCTYPE HTML>
<html>
<head>	
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>

<input type="text" id="poczatkowaWartosc">
<input type="button" value="Włącz" id="przyciskOdpalStoper"/>
<input type="button" value="Zatrzymaj" id="przyciskZatrzymajStoper"/>
<div id="uchwytStopera"></div>

<script type="text/javascript">
var timeOutStoper;

function stopwatch(uchwytStopera,liczba)
{
	uchwytStopera.innerHTML = liczba--;
	
	if(liczba < 0)
		return;
	timeOutStoper = setTimeout(function()
	{
		stopwatch(uchwytStopera, liczba);
	},1000);
}
function stopwatchInterval(uchwytStopera, liczba)
{
	 var timeIntervalRef = setInterval(function()
	{
		if(--liczba < 0)
		{
			clearInterval(timeIntervalRef);
			return;
		}
		uchwytStopera.innerHTML = liczba;
	},1000);
	
	return timeIntervalRef;
}
window.onload = function()
{
	
	var przyciskOdpalStoper = document.getElementById("przyciskOdpalStoper");
	var przyciskZatrzymajStoper = document.getElementById("przyciskZatrzymajStoper");

	var uchwytStopera = document.getElementById("uchwytStopera");
	
	var timeIntervalRef;
	
	przyciskOdpalStoper.onclick = function()
	{
		var poczatkowaWartosc = document.getElementById("poczatkowaWartosc").value;
		uchwytStopera.innerHTML = poczatkowaWartosc;
		timeIntervalRef = stopwatchInterval(uchwytStopera,poczatkowaWartosc);
	};
	przyciskZatrzymajStoper.onclick = function()
	{
		clearInterval(timeIntervalRef);
	};
};
</script>
</body>
</html>
